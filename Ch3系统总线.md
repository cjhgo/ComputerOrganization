viewport:width=device-width,initial-scale=1

目录

[TOC]
#[计算机组成原理](...)
##Ch3系统总线
系统总线的基本概念,分类,结构,总线控制逻辑

**总线的基本概念**
###2.总线的分类

分类标准

+ 数据传送方式
	- 并行传输总线
	- 串行传输总线
+ 使用范围
+ 连接部件的不同
	- 片内总线:芯片内部的总线
	- 系统总线:CPU,主存,外设(通过I/O接口)各大部件之间的信息传输线
		+ 数据总线:传输各功能部件之间的数据信息,双向传输总线
			- 数据总线的位数称为数据总线宽度,位数和机器字长,存储字长有关
		+ 地址总线:指出数据总线上的数据在主存或I/O设备的地址,由CPU输出,单向传输
			- 地址总线的位数与存储单元的个数有关
		+ 控制总线:用来发出各种控制信号的传输线,使各部件能在不同时刻占有总线使用权
			- **控制总线的每一根都是单向的,但从整体看,既有信号输入,又有信号输出**
			- 常见的控制信号
				+ 时钟
				+ 复位
				+ 总线请求
				+ 总线允许
				+ 中断请求
				+ 中断允许
				+ 存储器读
				+ 存储器写
				+ I/O读
				+ I/O写
				+ 传输响应
	- 通信总线:计算机系统或计算机系统与其他系统之间的通信
		+ 并行通信
		+ 串行通信
###3.总线特性及性能指标

+ 总线特性
	- 机械特性:机械连接方式上的一些性能
		+ 尺寸,引脚的个数和排列顺序...
	- 电气特性:总线的每一根传输线上信号的传递方向和有效的电平范围
		+ 规定由CPU发出的信号为输出信号,送入CPU的信号为输入信号
		+ 高低电平的正反逻辑,电平有效值
	- 功能特性
	- 时间特性:这根线在什么时间有效,信号时序图
+ 性能指标
	- 总线宽度:数据总线的根数
	- 总线带宽:总线的数据传输速率,单位时间内总线上传输数据的位数,单位MBps(兆字节每秒)
	- 时钟同步/异步:,?与时钟同步还是异步
	- 总线复用:一条信号线分时传送两种不同的信号
	- 信号线数:地址,数据,控制三种总线数的总和
	- 总线工作频率
+ 总线标准
	+ ISA
	+ EISA
	+ VESA
	+ PCI
	+ AGP
	+ RS-232C
	+ USB总线
###4.总线结构

+ 单总线结构
+ 多总线结构
	- 双总线
	- 三总线
###5.总线控制
总线上连接多个部件,什么时候由哪个部件发送信息....

**按照各部件的优先级来解决各个部件争夺总线使用权的问题**
**用分时方式处理通信时间的问题**

####总线判优控制/仲裁逻辑
判断优先级的方案

+ 集中式判优控制
	- 链式查询,3根线用于总线控制:BS,BR,BG,....离总线控制部件最近的设备具有最高的优先级,
	优先级别低的设备可能很难获得请求
	- 计数器定时查询,增加一根设备地址线,和计数器数值一致的获取总线控制权,动态改变优先级
	- 独立请求方式:每一台设备均由一对总线...
	- **确定使用权需要的总线数目**,...???
+ 分布式判优控制
####总线通信控制
分时占用总线
将完成一次总线操作的时间成为**总线周期**,可以分为4个阶段

+ 申请分配阶段:主设备提出申请,总线仲裁机构根据优先级授权
+ 寻址阶段:主设备通过总线发出地址,命令,等,启动相应的从设备
+ 传数阶段:
+ 结束阶段:主设备的有关信息从系统总线上撤除,让出总线使用权

总线通信控制解决**通信双方如何获知传输开始和传输结束,以及通信双方如何协调如何配合**
通常用四种方式

1. 同步通信:通信双方由统一时标控制数据传送
	+ 一个总线传输周期内总线上的两个部件完成一次完整且可靠的信息传输,包含四个时钟周期$T_1,T_2,T_3,T_4$
		- 同步式数据输入,读命令
		- 同步时数据输出,写命令
	+ 当通信的部件速度差距较大时,为了同步,不得不按最慢速度的部件设计**公共时钟**,
	所以同步通信一般用于总线长度短,部件存取时间比较一致的场合
	+ 数据传输速率和总线时钟频率,总线宽度的关系:
		- 总线在一个总线周期内完成了数据的传输,一个总线周期包含4个时钟周期,
		所以**总线时钟频率影响了总线周期的长度**
		- 总线宽度影响了在一次总线周期内传送的数据的位数
		- formula:
2. 异步通信:允许各个模块速度不一致,不需要公共时钟,不要求所有部件严格的统一操作时间,采用应答方式通信
	+ 根据应答方式异步通信可以分为三种类型
		- 不互锁
		- 半互锁
		- 全互锁
	+ 异步通信如何确认传输数据的开始于结束:按照字符格式,起始位,结束位,校验位
		- *波*特率:异步串行通信的数据传送速率
		- *比*特率:**只考虑有效数据位(不考虑那些为了起始,校验而传送的数据)**,
		单位时间内传送二进制**有效数据**的位数
3. 半同步通信:插入时钟等待周期
	+ 同步通信优势在于可靠(因为严格按照时钟工作),但工作速度不能差异过大,否则效率太低
	+ 异步通信优势在于允许不同速度的模块和谐工作(这正是同步通信的劣势)
	+ 半同步适用于工作速度不高但又包含了由许多工作速度差异较大的各类设备组成的简单系统
4. 分离式通信:在一个总线周期内主设备发出请求到从设备准备数据这个结点,总线上没有数据传送纯属空闲状态
所以**把一个总线周期分解为两个子周期**
	- 每个模块都变成了主模块
		+ 因为都是通过提出申请获得总线使用权(申请发命令,申请传回数据)
	- 总线没有空闲状态,要么在通过它发送命令,要么在通过它传送数据
