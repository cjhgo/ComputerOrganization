viewport:width=device-width,initial-scale=1

目录

[TOC]

#[计算机组成原理](...)
##Ch9控制单元的功能


在指令周期的4个阶段中,控制单元为完成不同指令所发出的各种操作命令(控制信号)

指令周期
机器周期/CPU周期
时钟周期/节拍
###微操作命令分析
####取指周期
1. $现行指令地址送至存储器,PC\to MAR$
2. $启动主存读操作,1\to R$
3. $将MAR所指的主存单元中的内容经数据总线读至MDR,M(MAR)\to MDR$
	+ 如何知道读多长的内容,如果指令是不定长的
4. $将MDR的内容送至IR,MDR\to IR$
5. $指令的操作码送至CU译码,OP(IR)\to CU$
6. $形成下一条指令的地址(PC)+1\to PC$
####间址周期
1. $将指令地址码部分送至MAR,Ad(IR)\to MAR $
2. $启动主存读操作,1\to R$
3. $M(MAR)\to MDR$
4. $将有效地址送至指令寄存器的地址字段,MDR\to Ad(IR)  $

####执行周期
10条指令

+ 非访存指令(5条)
	- 清除累加器
	- 累加器取反
	- 算术右移一位
	- 循环左移一位
	- 停机指令
+ 访存指令(3条)
	- 加法指令
	- 存数指令
	- 取数指令
+ 转移类指令(2条)
	- 无条件转移
	- 有条件转移
####中断周期
1. $将特定地址0送至MAR,0\to MAR$
2. $启动存储器写操作,1\to W$
3. $将程序断点PC内容送至MDR,PC\to MDR$
4. $MDR\to (MAR)$
5. $将向量地址形成部件的输出 送至PC,向量地址\to PC$
6. $硬件关中断,0\to EINT$

###控制单元的功能
####控制单元外特性
+ 输入信号
	- 时钟
	- 指令寄存器
	- 标志
	- 系统总线的控制信号,
	如中断,DMA请求
+ 输出信号
	- CPU内的控制信号
	- 送至系统总线(控制总线)的信号
+ 控制信号举例
	- 不采用CPU内部总线
	- 采用CPU内部总线
####多级时序系统
1. 机器周期
通常以访问一次存储器的时间定为基准时间,这个基准时间就是机器周期
2. 时钟周期(节拍,状态)
在一个机器周期里可完成若干个微操作,
每个微操作都需要一定的时间
可用时钟信号来控制产生每一个微操作
**每个节拍的宽度正好对应一个时钟周期**
	+ 每个节拍内机器可完成一个或几个需同时执行的操作
3. 多级时序系统
	+ 一个指令周期包含2-4个机器周期
	(取指周期,[间址周期],执行周期,[中断周期])
	+ 一个机器周期包含若干个时钟周期
		- 定长机器周期,每个机器周期包含4个节拍(4个T)
		- 不定长机器周期,每个机器周期包含的节拍数可以3个可以4个

主频是时钟周期,机器的速度是指令周期
机器的运行速度看主频,还要看指令周期有几个机器周期,机器周期有几个时钟周期		
####控制方式
控制单元控制一条指令执行的过程
依次执行一个确定的微操作序列的过程

**<u>将如何形成控制不同微操作序列所采用的时序控制方式成为CU的控制方式</u>**

+ 同步控制:受统一基准时标的时序信号所控制
	- 定长的机器周期,以最长的微操作序列为标准
	- 不定长的机器周期,对复杂的微操作延长机器周期或增加节拍
	- 中央控制和局部控制相结合
+ 异步控制,执行部件完成操作后发回'回答'
+ 联合控制,大部分统一,小部分区别对待
+ 人工控制,为了调试和软件开发的需要
	- 复位
	- 连续或单步执行
	- 符合停机开关
